version: 2

models:
  - name: ga4_items  # Change this to your actual model name
    description: "This model prepares and flattens GA4 items data, creating a join key and deduplicating item events."
    config:
      materialized: table
    columns:
      - name: dedup_id
        description: "Unique identifier for each event to remove duplicates."
        data_type: int

      - name: user_pseudo_id
        description: "Pseudo user ID associated with the event."
        data_type: string

      - name: event_timestamp
        description: "Timestamp of the event."
        data_type: timestamp

      - name: event_name
        description: "Name of the event."
        data_type: string

      - name: item_id
        description: "ID of the item involved in the event."
        data_type: string

      - name: item_name
        description: "Name of the item involved in the event."
        data_type: string

      - name: item_brand
        description: "Brand of the item involved in the event."
        data_type: string

      - name: item_variant
        description: "Variant of the item involved in the event."
        data_type: string

      - name: item_category
        description: "Main category of the item."
        data_type: string

      - name: item_category2
        description: "Secondary category of the item."
        data_type: string

      - name: item_category3
        description: "Tertiary category of the item."
        data_type: string

      - name: item_category4
        description: "Fourth category of the item."
        data_type: string

      - name: item_category5
        description: "Fifth category of the item."
        data_type: string

      - name: price_in_usd
        description: "Price of the item in USD."
        data_type: float

      - name: price
        description: "Price of the item in the local currency."
        data_type: float

      - name: quantity
        description: "Quantity of the item involved in the event."
        data_type: int

      - name: item_revenue_in_usd
        description: "Revenue generated by the item in USD."
        data_type: float

      - name: item_revenue
        description: "Revenue generated by the item in the local currency."
        data_type: float

      - name: item_refund_in_usd
        description: "Refund value for the item in USD."
        data_type: float

      - name: item_refund
        description: "Refund value for the item in the local currency."
        data_type: float

      - name: coupon
        description: "Coupon applied to the item."
        data_type: string

      - name: affiliation
        description: "Affiliation of the item in the event."
        data_type: string

      - name: location_id
        description: "Location ID associated with the item."
        data_type: string

      - name: item_list_id
        description: "ID of the item list from which the item was selected."
        data_type: string

      - name: item_list_name
        description: "Name of the item list from which the item was selected."
        data_type: string

      - name: item_list_index
        description: "Index of the item in the item list."
        data_type: int

      - name: promotion_id
        description: "ID of the promotion associated with the item."
        data_type: string

      - name: promotion_name
        description: "Name of the promotion associated with the item."
        data_type: string

      - name: creative_name
        description: "Creative name for the item."
        data_type: string

      - name: creative_slot
        description: "Creative slot where the item was shown."
        data_type: string

      - name: join_key
        description: "Join key created by concatenating user_pseudo_id, event_timestamp, event_name, and dedup_id."
        data_type: string
